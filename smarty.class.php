<?phpclass Smarty{	public $template_dir = "templates/";	public $complie_dir = "templates_c/";		var $tpl_vals = array();		function assign( $tpl_val, $val=null){		if( !empty($tpl_val) ){			$this->tpl_vals[$tpl_val] = $val;		}	}		function display( $tpl_file ){		if( empty($tpl_file) ) return;		$tpl_file_path = $this->template_dir.$tpl_file;		$complie_file_path = $this->complie_dir."com_".$tpl_file.".php";				if( !file_exists($tpl_file_path) ){			echo "文件不存在";		}		if( !file_exists($complie_file_path) || ( filemtime($tpl_file_path) > filemtime($complie_file_path) ) ){			$tpl_file_con = file_get_contents( $tpl_file_path );						$pattern = array( '/\{\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*\}/i' );			$replace = array( "<?php echo $this->tpl_vals['$1']?>");			$new_str = preg_replace( $pattern, $replace, $tpl_file_con );						file_put_contents( $complie_file_path,  $new_str);		}				include $complie_file_path;			}		}